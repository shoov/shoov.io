<!DOCTYPE html><!--[if IE 8]><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us" class="ie8"><![endif]--><!--[if IE 9]><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us" class="ie9"><![endif]--><!--[if !IE]><!--><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><!--<![endif]--><head><link href=http://gmpg.org/xfn/11 rel=profile><title>Lesson 3 - First Baseline Image &middot; Shoov.io</title><meta name=description content=""><meta name=keywords content=""><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link href=http://gmpg.org/xfn/11 rel=profile><link href="http://fonts.googleapis.com/css?family=Abril+Fatface" rel=stylesheet type=text/css><link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel=stylesheet type=text/css><link href="https://fonts.googleapis.com/css?family=Droid+Serif" rel=stylesheet type=text/css><link href="https://fonts.googleapis.com/css?family=Audiowide" rel=stylesheet type=text/css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css><link rel=stylesheet href=/assets/stylesheets/style.min.579e0d73.css><!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--><script src=/assets/javascript/all.min.33d57cc8.js></script><link rel=apple-touch-icon-precomposed sizes=144x144 href=/assets/images/touch/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/assets/favicon.ico><link rel=alternate type=application/rss+xml title=RSS href=/atom.xml><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-6558346-10', 'auto');
  ga('send', 'pageview');</script></head><body><header id=header class=header><div class=container><h1 class=logo><a href="/"><span class=text>Shoov</span></a></h1><nav class="main-nav navbar-right" role=navigation><div class=navbar-header><button class=navbar-toggle type=button data-toggle=collapse data-target=#navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button></div><div id=navbar-collapse class="navbar-collapse collapse"><ul class="nav navbar-nav"><li class="nav-item nav-item-cta last"><a class="btn btn-cta btn-cta-secondary" href=https://app.shoov.io><i class="fa fa-user"></i> Login or register</a></li></ul></div></nav></div></header><main class=""><div class=container><div class="page tutorial"><h1 class=title>Lesson 3 - First Baseline Image</h1><hr class="full"><div class=row><div class=col-xs-12><button class="btn btn-default pull-right menu" data-toggle=collapse data-target=#lessons-menu><i class="fa fa-book"></i> Lessons menu</button></div><div id=lessons-menu class="collapse col-xs-12"><div class=lessons><a href="/tutorials/lesson1-install/" class="">Lesson 1 - Installation & Setup</a> <a href="/tutorials/lesson2-scaffold/" class="">Lesson 2 - Setup a GitHub repository</a> <a href="/tutorials/lesson3-static-page/" class=active>Lesson 3 - First Baseline Image</a> <a href="/tutorials/lesson4-dynamic-intro/" class="">Lesson 4 - Dynamic Elements Intro</a> <a href="/tutorials/lesson5-dynamic-complex/" class="">Lesson 5 - Complex Dynamic Elements</a></div></div></div><blockquote><p>Tip: The final result of this tutorial can be seen in this <a href=https://github.com/shoov/getting-started-example/blob/master/visual-monitor/test/tests.js>repository</a></p></blockquote><p>Lets do our first visual regression test on a dummy page which is completely static - that is, a page that never changes and has no dynamic content in it. The URL is <a href=http://pages.shoov.io>http://pages.shoov.io</a></p><p>This is the most simple case as we simply need to set the correct URL. We already have the <code>baseUrl</code> set to <code>http://pages.shoov.io</code> so we just need to adapt the following piece of code:</p><figure class=highlight><pre><code class=language-js data-lang=js>it(&#39;should show the static page&#39;,function(done) {
  client
    .url(baseUrl)
    .webdrivercss(testName + &#39;.static&#39;, {
</code></pre></figure><p>We are ready to create our first baseline image. From <code>visual-monitor</code> folder execute the following command:</p><figure class=highlight><pre><code class=language-bash data-lang=bash>PROVIDER_PREFIX=browserstack SELECTED_CAPS=chrome mocha
</code></pre></figure><p>Lets break the above command:</p><ol><li><code>PROVIDER_PREFIX=browserstack</code>: This tells our test to pick the configuration of BrowserStack, instead of for example using the default PhantomJs configuration.</li><li><code>SELECTED_CAPS=chrome</code>: The selected capabilities for this is <code>chrome</code>. This is an arbitrary name that is indicated in our test as Chrome version 42.0 on a OS X Yosemite. You may add as many capabilities as you wish.</li><li><code>mocha</code>: This executes all the tests under the <code>test</code> folder, and reports if tests failed or passed.</li></ol><p>Open BrowserStack&rsquo;s <a href=https://www.browserstack.com/automate>automate</a> page, and see how BrowserStack has provisioned a VM (virtual machine) with the exact same capabilities our test specified.</p><p><img src=/assets/images/tutorials/lesson3/automate.jpg alt="BrowserStack automate page"></p><p>Once finished you will find a new folder called <code>webdrivercss</code> - this is where all your baseline images will be saved.</p><p>You will see two files over there. We care only about the one that ends with <code>baseline.png</code> .In fact when we&rsquo;ll do <code>git add webdrivercss</code> it will add only the files that end with <code>baseline.png</code>, the rest are disregarded.</p><p>Lets confirm our baseline is correct by visually checking it and then by re-running the exact same test.</p><figure class=highlight><pre><code class=language-bash data-lang=bash>PROVIDER_PREFIX=browserstack SELECTED_CAPS=chrome mocha
</code></pre></figure><p>If everything went well, no regression should happen, and mocha will show us the test has finished without errors, and we can commit the files.</p><figure class=highlight><pre><code class=language-bash data-lang=bash>git add .
git commit -am &quot;Add baseline images for Chrome&quot;
</code></pre></figure><p>We can now continue creating baselines for different browsers. The test doesn&rsquo;t need to change - only the way we invoke it. For example, to create the baseline for Internet Explorer 11, we can execute it with the following command:</p><figure class=highlight><pre><code class=language-bash data-lang=bash>PROVIDER_PREFIX=browserstack SELECTED_CAPS=ie11 mocha
</code></pre></figure><p>But wait, don&rsquo;t commit the IE baseline image yet! Open the image that was done for IE. Have a close look. Is it ok?</p><p>Unfortunately, yet unsurprisingly, IE behaves differently than Chrome. The fixed navbar seems to repeat when the smaller images created by webdriverCSS are &ldquo;stitched&rdquo; together, resulting with a wrong image (we&rsquo;re trying to fix the issue <a href=(https://github.com/webdriverio/webdrivercss/issues/56)>issue</a> in webdriverCSS).</p><p><img src=/assets/images/tutorials/lesson3/ie-fixed-navbar.jpg alt="The fixed navbar is duplicated"></p><p>In the <a href="/tutorials/lesson4-dynamic-intro/">next chapter</a> we will see how to deal with this.</p></div></div></main><footer id=footer><div class="container company-detail"><div class="country clearfix"><span class=turquoise>Israel Headquarters</span> <span>5 Brenner St., Tel-Aviv</span> <span>+972-3-3731222</span> <span><a href=mailto:info@gizra.com class=email>info@gizra.com</a></span></div><div class="country clearfix"><span class=turquoise>North America Office</span> <span>157 Columbus Ave, 4th floor, New York, NY 10023</span> <span>+1-347-686-4508</span> <span><a href=mailto:info@gizra.com class=email>usoffice@gizra.com</a></span></div></div></footer></body></html>